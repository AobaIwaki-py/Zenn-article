---
title: "Prometheusã¨Node Exporterã§åé›†ã—ãŸæƒ…å ±ã‚’Grafanaã§å¯è¦–åŒ–ã™ã‚‹"
emoji: "ğŸ‘»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["linux","docker","prometheus",'grafana']
published: false
---
# ã“ã®è¨˜äº‹ã®æ¦‚è¦


# æƒ…å ±åé›†ç”¨ã®ã‚µãƒ¼ãƒãƒ¼ã«Prometheusã®è¨­å®šã‚’è¡Œã†

- ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‹ã‚‰Prometheusã®æœ€æ–°ç‰ˆã®ãƒªãƒ³ã‚¯ã‚’èª¿ã¹ã¦ãã ã•ã„ã€‚
  - [Download | Prometheus](https://prometheus.io/download/)
- èª¿ã¹ãŸãƒªãƒ³ã‚¯å…ˆã®`tar`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`wget`ã‚³ãƒãƒ³ãƒ‰ã§å–å¾—ã—ã¾ã™ã€‚
```bash
$ wget https://github.com/prometheus/prometheus/releases/download/v2.43.0-rc.0/prometheus-2.43.0-rc.0.linux-amd64.tar.gz
```
- ãã®å¾Œã€`tar`ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£å‡ã—ã¾ã™ã€‚
```bash
$ tar xvfz prometheus-2.43.0-rc.0.linux-amd64.tar.gz
```
- è§£å‡ã—ã¦ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€ã‚’VSCodeãªã©ã®ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§é–‹ãã¾ã™ã€‚
- ãƒ•ã‚©ãƒ«ãƒ€ç›´ä¸‹ã®`prometheus.yml`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚
```yaml:prometheus.yaml
global:
  scrape_interval:     15s # By default, scrape targets every 15 seconds.
  external_labels:
    monitor: 'codelab-monitor'
scrape_configs:
  - job_name: 'prometheus'
    scrape_interval: 5s
    static_configs:
      - targets: ['localhost:9000']
      - targets: ['{ç›£è¦–å¯¾è±¡ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹}:9100']
```
- ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ Prometheusã‚µãƒ¼ãƒãƒ¼ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¸¡ã—ã¦èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```bash
$ ./prometheus --config.file=prometheus.yml
```
- ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦æ¬¡ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã‚Œã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æˆåŠŸã§ã™ã€‚
```bash
$ curl localhost:9090
<a href="/graph">Found</a>.
```
ç§ã¯ã€Dockerã«æ˜ã‚‹ããªã„ã®ã§ã“ã“ã¾ã§ã®å‡¦ç†ã‚’Dockerã§è¡Œã†æ–¹æ³•ãŒã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
# ç›£è¦–å¯¾è±¡ã®ã‚µãƒ¼ãƒãƒ¼ã«Node Exporterã®è¨­å®šã‚’è¡Œã†


# Grafanaã§ç¶ºéº—ã«å¯è¦–åŒ–ã™ã‚‹
